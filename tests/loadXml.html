<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
		<meta charset="utf-8">
		<title>Smoosic Editor</title>
		<link href="../build/styles/fonts.css" rel="stylesheet">
        <link href="../build/styles/media.css" rel="stylesheet">
        <link href="../build/styles/ribbon.css" rel="stylesheet">
        <link href="../build/styles/dialogs.css" rel="stylesheet">
        <link href="../build/styles/menus.css" rel="stylesheet">
        <link href="../build/styles/piano.css" rel="stylesheet">
        <link href="..//build/styles/tree.css" rel="stylesheet">
        <script type="text/javascript" src="https://aarondavidnewman.github.io/vexflow_smoosic/releases/vexflow-debug.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js" integrity="sha512-uVSVjE7zYsGz4ag0HEzfugJ78oHCI1KhdkivjQro8ABL/PRiEO4ROwvrolYAcZnky0Fl/baWKYilQfWvESliRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- script type="text/javascript" src="../../../vex_smoosic/vexflow_smoosic/build/vexflow-debug.js"></script  -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.js" ></script>
		<script type="text/javascript" src="../build/smoosic.js" ></script>
    <script type="text/javascript">
           document.addEventListener("DOMContentLoaded", function (event) {
               // A simple music program using Smoosic in library mode.
               // Load a Music XML file (Finale) and render it
               const renderScore = (score) => {
                 Smo.SuiApplication.configure({
                   mode: 'library',
                   idleRedrawTime: 500
                 });
                 // Create the renderer that renders the music.  SVG music will be created
                 // in the element
                 const renderer = Smo.SuiScoreRender.createScoreRenderer(document.getElementById('container1'), score);
                 // Create and start the view object.
                 // The outer container DOM is for scrolling
                 const view = new Smo.SuiScoreViewOperations(renderer, score, '#outer-container');
                 view.startRenderingEngine();
                 return Smo.PromiseHelpers.renderPromise(renderer);
               }
               const loadScore = (loader) => {
                const parser = new DOMParser();
                const xml = parser.parseFromString(loader.value, 'text/xml');
                const score = Smo.mxmlScore.smoScoreFromXml(xml);
                // For this demo, zoom it out so it doesn't try to squish the score in that little space
                score.layoutManager.globalLayout.zoomScale = 1.5;
                score.layoutManager.globalLayout.noteSpacing = 0.8;
                return renderScore(score);
               }
               const loadXml = (path) => {
                 const loader = new Smo.SuiXhrLoader(path);
                 return loader.loadAsync().then(() => {
                   return loadScore(loader);
                 }).then(sleeper);
               }
               const sleeper = () => {
                 return new Promise((resolve) => {
                   setTimeout(() => resolve(), 1000);
                 });
               }
               const path1 = 'https://aarondavidnewman.github.io/Smoosic/release/library/Beethoven_AnDieFerneGeliebte.xml';
               const path2 = 'https://aarondavidnewman.github.io/Smoosic/release/library/Mozart_AnChloe.xml';
               const path3 = 'https://aarondavidnewman.github.io/Smoosic/release/library/cp/Anthropology Eb.mxl';
               const path4 = 'https://aarondavidnewman.github.io/Smoosic/release/library/xml/Gnossienne_No._3.mxl';
               loadXml(path1).then(() => loadXml(path2)).then(() => loadXml(path3)).then(() => loadXml(path4)).then(() => { console.log('done')});
           });
       </script>
</head>
<body>
  <!-- audio crossOrigin="anonymous" id="sample" src="https://aarondavidnewman.github.io/Smoosic/build/sound/piano_middle_C.mp3" / -->
  <div id="outer-container" style="overflow: auto;">
    <div id="container1">

    </div>
  </div>
</body>
</html>
